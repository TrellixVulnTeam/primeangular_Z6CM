"use strict";(self.webpackChunkprimeng=self.webpackChunkprimeng||[]).push([[2966],{2966:(b,f,c)=>{c.d(f,{xc:()=>e.xc});var e=c(1498)},1498:(b,f,c)=>{c.d(f,{mp:()=>v,xc:()=>Se});var e=c(3668),g=c(8267),p=c(6019),h=c(3392),u=c(7550),x=c(3475),C=c(5989),y=c(1197);const N=function(n){return{"p-treenode-droppoint-active":n}};function I(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"li",4),e.NdJ("drop",function(o){return e.CHM(t),e.oxw(2).onDropPoint(o,-1)})("dragover",function(o){return e.CHM(t),e.oxw(2).onDropPointDragOver(o)})("dragenter",function(o){return e.CHM(t),e.oxw(2).onDropPointDragEnter(o,-1)})("dragleave",function(o){return e.CHM(t),e.oxw(2).onDropPointDragLeave(o)}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(1,N,t.draghoverPrev))}}const S=function(n){return{"p-checkbox-disabled":n}},D=function(n,l){return{"p-highlight":n,"p-indeterminate":l}},w=function(n,l){return{"pi-check":n,"pi-minus":l}};function M(n,l){if(1&n&&(e.TgZ(0,"div",13),e.TgZ(1,"div",14),e._UZ(2,"span",15),e.qZA(),e.qZA()),2&n){const t=e.oxw(3);e.Q6J("ngClass",e.VKq(4,S,!1===t.node.selectable)),e.uIk("aria-checked",t.isSelected()),e.xp6(1),e.Q6J("ngClass",e.WLB(6,D,t.isSelected(),t.node.partialSelected)),e.xp6(1),e.Q6J("ngClass",e.WLB(9,w,t.isSelected(),t.node.partialSelected))}}function E(n,l){if(1&n&&e._UZ(0,"span"),2&n){const t=e.oxw(3);e.Tol(t.getIcon())}}function k(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.node.label)}}function U(n,l){1&n&&e.GkF(0)}const m=function(n){return{$implicit:n}};function Z(n,l){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,U,1,0,"ng-container",16),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t.tree.getTemplateForNode(t.node))("ngTemplateOutletContext",e.VKq(2,m,t.node))}}function O(n,l){if(1&n&&e._UZ(0,"p-treeNode",19),2&n){const t=l.$implicit,i=l.first,o=l.last,r=l.index,a=e.oxw(4);e.Udp("height",a.tree.virtualNodeHeight,"px"),e.Q6J("node",t)("parentNode",a.node)("firstChild",i)("lastChild",o)("index",r)("level",a.level+1)}}function A(n,l){if(1&n&&(e.TgZ(0,"ul",17),e.YNc(1,O,1,8,"p-treeNode",18),e.qZA()),2&n){const t=e.oxw(3);e.Udp("display",t.node.expanded?"block":"none"),e.xp6(1),e.Q6J("ngForOf",t.node.children)("ngForTrackBy",t.tree.trackBy)}}const J=function(n,l){return["p-treenode",n,l]},Q=function(n,l,t){return{"p-treenode-selectable":n,"p-treenode-dragover":l,"p-highlight":t}},P=function(n,l){return{"pi-chevron-right":n,"pi-chevron-down":l}};function F(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"li",5),e.TgZ(1,"div",6),e.NdJ("click",function(o){return e.CHM(t),e.oxw(2).onNodeClick(o)})("contextmenu",function(o){return e.CHM(t),e.oxw(2).onNodeRightClick(o)})("touchend",function(){return e.CHM(t),e.oxw(2).onNodeTouchEnd()})("drop",function(o){return e.CHM(t),e.oxw(2).onDropNode(o)})("dragover",function(o){return e.CHM(t),e.oxw(2).onDropNodeDragOver(o)})("dragenter",function(o){return e.CHM(t),e.oxw(2).onDropNodeDragEnter(o)})("dragleave",function(o){return e.CHM(t),e.oxw(2).onDropNodeDragLeave(o)})("dragstart",function(o){return e.CHM(t),e.oxw(2).onDragStart(o)})("dragend",function(o){return e.CHM(t),e.oxw(2).onDragStop(o)})("keydown",function(o){return e.CHM(t),e.oxw(2).onKeyDown(o)}),e.TgZ(2,"button",7),e.NdJ("click",function(o){return e.CHM(t),e.oxw(2).toggle(o)}),e._UZ(3,"span",8),e.qZA(),e.YNc(4,M,3,12,"div",9),e.YNc(5,E,1,2,"span",3),e.TgZ(6,"span",10),e.YNc(7,k,2,1,"span",11),e.YNc(8,Z,2,4,"span",11),e.qZA(),e.qZA(),e.YNc(9,A,2,4,"ul",12),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngClass",e.WLB(17,J,t.node.styleClass||"",t.isLeaf()?"p-treenode-leaf":"")),e.xp6(1),e.Udp("padding-left",t.level*t.indentation+"rem"),e.Q6J("draggable",t.tree.draggableNodes)("ngClass",e.kEZ(20,Q,t.tree.selectionMode&&!1!==t.node.selectable,t.draghoverNode,t.isSelected())),e.uIk("tabindex",0)("aria-posinset",t.index+1)("aria-expanded",t.node.expanded)("aria-selected",t.isSelected())("aria-label",t.node.label),e.xp6(1),e.uIk("aria-label",t.tree.togglerAriaLabel),e.xp6(1),e.Q6J("ngClass",e.WLB(24,P,!t.node.expanded,t.node.expanded)),e.xp6(1),e.Q6J("ngIf","checkbox"==t.tree.selectionMode),e.xp6(1),e.Q6J("ngIf",t.node.icon||t.node.expandedIcon||t.node.collapsedIcon),e.xp6(2),e.Q6J("ngIf",!t.tree.getTemplateForNode(t.node)),e.xp6(1),e.Q6J("ngIf",t.tree.getTemplateForNode(t.node)),e.xp6(1),e.Q6J("ngIf",!t.tree.virtualScroll&&t.node.children&&t.node.expanded)}}function B(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"li",4),e.NdJ("drop",function(o){return e.CHM(t),e.oxw(2).onDropPoint(o,1)})("dragover",function(o){return e.CHM(t),e.oxw(2).onDropPointDragOver(o)})("dragenter",function(o){return e.CHM(t),e.oxw(2).onDropPointDragEnter(o,1)})("dragleave",function(o){return e.CHM(t),e.oxw(2).onDropPointDragLeave(o)}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(1,N,t.draghoverNext))}}const T=function(n){return{"p-treenode-connector-line":n}};function L(n,l){if(1&n&&(e.TgZ(0,"td",25),e.TgZ(1,"table",26),e.TgZ(2,"tbody"),e.TgZ(3,"tr"),e._UZ(4,"td",5),e.qZA(),e.TgZ(5,"tr"),e._UZ(6,"td",5),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw(3);e.xp6(4),e.Q6J("ngClass",e.VKq(2,T,!t.firstChild)),e.xp6(2),e.Q6J("ngClass",e.VKq(4,T,!t.lastChild))}}const H=function(n,l){return{"pi-plus":n,"pi-minus":l}};function Y(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"span",27),e.NdJ("click",function(o){return e.CHM(t),e.oxw(3).toggle(o)}),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("ngClass",e.WLB(2,H,!t.node.expanded,t.node.expanded)),e.uIk("aria-label",t.tree.togglerAriaLabel)}}function q(n,l){if(1&n&&e._UZ(0,"span"),2&n){const t=e.oxw(3);e.Tol(t.getIcon())}}function V(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(t.node.label)}}function z(n,l){1&n&&e.GkF(0)}function K(n,l){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,z,1,0,"ng-container",16),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t.tree.getTemplateForNode(t.node))("ngTemplateOutletContext",e.VKq(2,m,t.node))}}function R(n,l){if(1&n&&e._UZ(0,"p-treeNode",31),2&n){const i=l.first,o=l.last;e.Q6J("node",l.$implicit)("firstChild",i)("lastChild",o)}}function W(n,l){if(1&n&&(e.TgZ(0,"td",28),e.TgZ(1,"div",29),e.YNc(2,R,1,3,"p-treeNode",30),e.qZA(),e.qZA()),2&n){const t=e.oxw(3);e.Udp("display",t.node.expanded?"table-cell":"none"),e.xp6(2),e.Q6J("ngForOf",t.node.children)("ngForTrackBy",t.tree.trackBy)}}const G=function(n){return{"p-treenode-collapsed":n}},j=function(n,l){return{"p-treenode-selectable":n,"p-highlight":l}};function $(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"table"),e.TgZ(1,"tbody"),e.TgZ(2,"tr"),e.YNc(3,L,7,6,"td",20),e.TgZ(4,"td",21),e.TgZ(5,"div",22),e.NdJ("click",function(o){return e.CHM(t),e.oxw(2).onNodeClick(o)})("contextmenu",function(o){return e.CHM(t),e.oxw(2).onNodeRightClick(o)})("touchend",function(){return e.CHM(t),e.oxw(2).onNodeTouchEnd()})("keydown",function(o){return e.CHM(t),e.oxw(2).onNodeKeydown(o)}),e.YNc(6,Y,1,5,"span",23),e.YNc(7,q,1,2,"span",3),e.TgZ(8,"span",10),e.YNc(9,V,2,1,"span",11),e.YNc(10,K,2,4,"span",11),e.qZA(),e.qZA(),e.qZA(),e.YNc(11,W,3,4,"td",24),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.Tol(t.node.styleClass),e.xp6(3),e.Q6J("ngIf",!t.root),e.xp6(1),e.Q6J("ngClass",e.VKq(10,G,!t.node.expanded)),e.xp6(1),e.Q6J("ngClass",e.WLB(12,j,t.tree.selectionMode,t.isSelected())),e.xp6(1),e.Q6J("ngIf",!t.isLeaf()),e.xp6(1),e.Q6J("ngIf",t.node.icon||t.node.expandedIcon||t.node.collapsedIcon),e.xp6(2),e.Q6J("ngIf",!t.tree.getTemplateForNode(t.node)),e.xp6(1),e.Q6J("ngIf",t.tree.getTemplateForNode(t.node)),e.xp6(1),e.Q6J("ngIf",t.node.children&&t.node.expanded)}}function X(n,l){if(1&n&&(e.YNc(0,I,1,3,"li",1),e.YNc(1,F,10,27,"li",2),e.YNc(2,B,1,3,"li",1),e.YNc(3,$,12,15,"table",3)),2&n){const t=e.oxw();e.Q6J("ngIf",t.tree.droppableNodes),e.xp6(1),e.Q6J("ngIf",!t.tree.horizontal),e.xp6(1),e.Q6J("ngIf",t.tree.droppableNodes&&t.lastChild),e.xp6(1),e.Q6J("ngIf",t.tree.horizontal)}}const ee=["filter"];function te(n,l){if(1&n&&(e.TgZ(0,"div",9),e._UZ(1,"i"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Tol("p-tree-loading-icon pi-spin "+t.loadingIcon)}}function ie(n,l){1&n&&e.GkF(0)}function ne(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"input",11,12),e.NdJ("keydown.enter",function(o){return o.preventDefault()})("input",function(o){return e.CHM(t),e.oxw(2)._filter(o.target.value)}),e.qZA(),e._UZ(3,"span",13),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.uIk("placeholder",t.filterPlaceholder)}}function oe(n,l){if(1&n&&e._UZ(0,"p-treeNode",18),2&n){const i=l.first,o=l.last,r=l.index;e.Q6J("node",l.$implicit)("firstChild",i)("lastChild",o)("index",r)("level",0)}}function re(n,l){if(1&n&&(e.TgZ(0,"ul",16),e.YNc(1,oe,1,5,"p-treeNode",17),e.qZA()),2&n){const t=e.oxw(3);e.uIk("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledBy),e.xp6(1),e.Q6J("ngForOf",t.getRootNode())("ngForTrackBy",t.trackBy)}}function le(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",14),e.YNc(2,re,2,4,"ul",15),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Udp("max-height",t.scrollHeight),e.xp6(1),e.Q6J("ngIf",t.getRootNode())}}function ae(n,l){if(1&n&&e._UZ(0,"p-treeNode",21),2&n){const t=l.$implicit,i=l.first,o=l.last,r=l.index,a=e.oxw(4);e.Udp("height",a.virtualNodeHeight,"px"),e.Q6J("level",t.level)("rowNode",t)("node",t.node)("firstChild",i)("lastChild",o)("index",r)("indentation",a.indentation)}}function de(n,l){if(1&n&&(e.TgZ(0,"ul",16),e.YNc(1,ae,1,9,"p-treeNode",20),e.qZA()),2&n){const t=e.oxw(3);e.uIk("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledBy),e.xp6(1),e.Q6J("cdkVirtualForOf",t.serializedValue)("cdkVirtualForTrackBy",t.trackBy)("cdkVirtualForTemplateCacheSize",0)}}function se(n,l){if(1&n&&(e.TgZ(0,"cdk-virtual-scroll-viewport",19),e.YNc(1,de,2,5,"ul",15),e.qZA()),2&n){const t=e.oxw(2);e.Udp("height",t.scrollHeight),e.Q6J("itemSize",t.virtualNodeHeight)("minBufferPx",t.minBufferPx)("maxBufferPx",t.maxBufferPx),e.xp6(1),e.Q6J("ngIf",t.getRootNode())}}function ce(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.emptyMessageLabel," ")}}function pe(n,l){1&n&&e.GkF(0,null,23)}function _e(n,l){if(1&n&&(e.TgZ(0,"div",22),e.YNc(1,ce,2,1,"ng-container",6),e.YNc(2,pe,2,0,"ng-container",4),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.emptyMessageTemplate)("ngIfElse",t.emptyFilter),e.xp6(1),e.Q6J("ngTemplateOutlet",t.emptyMessageTemplate)}}function ge(n,l){1&n&&e.GkF(0)}const he=function(n,l,t,i){return{"p-tree p-component":!0,"p-tree-selectable":n,"p-treenode-dragover":l,"p-tree-loading":t,"p-tree-flex-scrollable":i}};function fe(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("drop",function(o){return e.CHM(t),e.oxw().onDrop(o)})("dragover",function(o){return e.CHM(t),e.oxw().onDragOver(o)})("dragenter",function(){return e.CHM(t),e.oxw().onDragEnter()})("dragleave",function(o){return e.CHM(t),e.oxw().onDragLeave(o)}),e.YNc(1,te,2,2,"div",3),e.YNc(2,ie,1,0,"ng-container",4),e.YNc(3,ne,4,1,"div",5),e.YNc(4,le,3,3,"ng-container",6),e.YNc(5,se,2,6,"ng-template",null,7,e.W1O),e.YNc(7,_e,3,3,"div",8),e.YNc(8,ge,1,0,"ng-container",4),e.qZA()}if(2&n){const t=e.MAs(6),i=e.oxw();e.Tol(i.styleClass),e.Q6J("ngClass",e.l5B(11,he,i.selectionMode,i.dragHover,i.loading,"flex"===i.scrollHeight))("ngStyle",i.style),e.xp6(1),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngTemplateOutlet",i.headerTemplate),e.xp6(1),e.Q6J("ngIf",i.filter),e.xp6(1),e.Q6J("ngIf",!i.virtualScroll)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",!i.loading&&(null==i.getRootNode()||0===i.getRootNode().length)),e.xp6(1),e.Q6J("ngTemplateOutlet",i.footerTemplate)}}function ue(n,l){1&n&&e.GkF(0)}function xe(n,l){if(1&n&&(e.TgZ(0,"div",27),e._UZ(1,"i"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Tol("p-tree-loading-icon pi-spin "+t.loadingIcon)}}function Ne(n,l){if(1&n&&(e.TgZ(0,"table"),e._UZ(1,"p-treeNode",28),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("node",t.value[0])("root",!0)}}function me(n,l){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.emptyMessageLabel," ")}}function Te(n,l){1&n&&e.GkF(0,null,23)}function ve(n,l){if(1&n&&(e.TgZ(0,"div",22),e.YNc(1,me,2,1,"ng-container",6),e.YNc(2,Te,2,0,"ng-container",4),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.emptyMessageTemplate)("ngIfElse",t.emptyFilter),e.xp6(1),e.Q6J("ngTemplateOutlet",t.emptyMessageTemplate)}}function be(n,l){1&n&&e.GkF(0)}const Ce=function(n){return{"p-tree p-tree-horizontal p-component":!0,"p-tree-selectable":n}};function ye(n,l){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,ue,1,0,"ng-container",4),e.YNc(2,xe,2,2,"div",25),e.YNc(3,Ne,2,2,"table",26),e.YNc(4,ve,3,3,"div",8),e.YNc(5,be,1,0,"ng-container",4),e.qZA()),2&n){const t=e.oxw();e.Tol(t.styleClass),e.Q6J("ngClass",e.VKq(9,Ce,t.selectionMode))("ngStyle",t.style),e.xp6(1),e.Q6J("ngTemplateOutlet",t.headerTemplate),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",t.value&&t.value[0]),e.xp6(1),e.Q6J("ngIf",!t.loading&&(null==t.getRootNode()||0===t.getRootNode().length)),e.xp6(1),e.Q6J("ngTemplateOutlet",t.footerTemplate)}}let Ie=(()=>{class n{constructor(t){this.tree=t}ngOnInit(){this.node.parent=this.parentNode,this.parentNode&&this.tree.syncNodeOption(this.node,this.tree.value,"parent",this.tree.getNodeWithKey(this.parentNode.key,this.tree.value))}getIcon(){let t;return t=this.node.icon?this.node.icon:this.node.expanded&&this.node.children&&this.node.children.length?this.node.expandedIcon:this.node.collapsedIcon,n.ICON_CLASS+" "+t}isLeaf(){return this.tree.isNodeLeaf(this.node)}toggle(t){this.node.expanded?this.collapse(t):this.expand(t)}expand(t){this.node.expanded=!0,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeExpand.emit({originalEvent:t,node:this.node})}collapse(t){this.node.expanded=!1,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeCollapse.emit({originalEvent:t,node:this.node})}onNodeClick(t){this.tree.onNodeClick(t,this.node)}onNodeKeydown(t){13===t.which&&this.tree.onNodeClick(t,this.node)}onNodeTouchEnd(){this.tree.onNodeTouchEnd()}onNodeRightClick(t){this.tree.onNodeRightClick(t,this.node)}isSelected(){return this.tree.isSelected(this.node)}onDropPoint(t,i){t.preventDefault();let o=this.tree.dragNode,d=this.tree.dragNodeTree!==this.tree||1===i||this.tree.dragNodeIndex!==this.index-1;if(this.tree.allowDrop(o,this.node,this.tree.dragNodeScope)&&d){let s=Object.assign({},this.createDropPointEventMetadata(i));this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:t,dragNode:o,dropNode:this.node,index:this.index,accept:()=>{this.processPointDrop(s)}}):(this.processPointDrop(s),this.tree.onNodeDrop.emit({originalEvent:t,dragNode:o,dropNode:this.node,index:this.index}))}this.draghoverPrev=!1,this.draghoverNext=!1}processPointDrop(t){let i=t.dropNode.parent?t.dropNode.parent.children:this.tree.value;t.dragNodeSubNodes.splice(t.dragNodeIndex,1);let o=this.index;t.position<0?(o=t.dragNodeSubNodes===i?t.dragNodeIndex>t.index?t.index:t.index-1:t.index,i.splice(o,0,t.dragNode)):(o=i.length,i.push(t.dragNode)),this.tree.dragDropService.stopDrag({node:t.dragNode,subNodes:t.dropNode.parent?t.dropNode.parent.children:this.tree.value,index:t.dragNodeIndex})}createDropPointEventMetadata(t){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node,index:this.index,position:t}}onDropPointDragOver(t){t.dataTransfer.dropEffect="move",t.preventDefault()}onDropPointDragEnter(t,i){this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(i<0?this.draghoverPrev=!0:this.draghoverNext=!0)}onDropPointDragLeave(t){this.draghoverPrev=!1,this.draghoverNext=!1}onDragStart(t){this.tree.draggableNodes&&!1!==this.node.draggable?(t.dataTransfer.setData("text","data"),this.tree.dragDropService.startDrag({tree:this,node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index,scope:this.tree.draggableScope})):t.preventDefault()}onDragStop(t){this.tree.dragDropService.stopDrag({node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index})}onDropNodeDragOver(t){t.dataTransfer.dropEffect="move",this.tree.droppableNodes&&(t.preventDefault(),t.stopPropagation())}onDropNode(t){if(this.tree.droppableNodes&&!1!==this.node.droppable){let i=this.tree.dragNode;if(this.tree.allowDrop(i,this.node,this.tree.dragNodeScope)){let o=Object.assign({},this.createDropNodeEventMetadata());this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:t,dragNode:i,dropNode:this.node,index:this.index,accept:()=>{this.processNodeDrop(o)}}):(this.processNodeDrop(o),this.tree.onNodeDrop.emit({originalEvent:t,dragNode:i,dropNode:this.node,index:this.index}))}}t.preventDefault(),t.stopPropagation(),this.draghoverNode=!1}createDropNodeEventMetadata(){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node}}processNodeDrop(t){let i=t.dragNodeIndex;t.dragNodeSubNodes.splice(i,1),t.dropNode.children?t.dropNode.children.push(t.dragNode):t.dropNode.children=[t.dragNode],this.tree.dragDropService.stopDrag({node:t.dragNode,subNodes:t.dropNode.parent?t.dropNode.parent.children:this.tree.value,index:i})}onDropNodeDragEnter(t){this.tree.droppableNodes&&!1!==this.node.droppable&&this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(this.draghoverNode=!0)}onDropNodeDragLeave(t){if(this.tree.droppableNodes){let i=t.currentTarget.getBoundingClientRect();(t.x>i.left+i.width||t.x<i.left||t.y>=Math.floor(i.top+i.height)||t.y<i.top)&&(this.draghoverNode=!1)}}onKeyDown(t){const i=t.target.parentElement.parentElement;if(!("P-TREENODE"!==i.nodeName||this.tree.contextMenu&&"block"===this.tree.contextMenu.containerViewChild.nativeElement.style.display))switch(t.which){case 40:const o=this.tree.droppableNodes?i.children[1].children[1]:i.children[0].children[1];if(o&&o.children.length>0)this.focusNode(o.children[0]);else{const r=i.nextElementSibling;if(r)this.focusNode(r);else{let a=this.findNextSiblingOfAncestor(i);a&&this.focusNode(a)}}t.preventDefault();break;case 38:if(i.previousElementSibling)this.focusNode(this.findLastVisibleDescendant(i.previousElementSibling));else{let r=this.getParentNodeElement(i);r&&this.focusNode(r)}t.preventDefault();break;case 39:!this.node.expanded&&!this.tree.isNodeLeaf(this.node)&&this.expand(t),t.preventDefault();break;case 37:if(this.node.expanded)this.collapse(t);else{let r=this.getParentNodeElement(i);r&&this.focusNode(r)}t.preventDefault();break;case 13:this.tree.onNodeClick(t,this.node),t.preventDefault()}}findNextSiblingOfAncestor(t){let i=this.getParentNodeElement(t);return i?i.nextElementSibling?i.nextElementSibling:this.findNextSiblingOfAncestor(i):null}findLastVisibleDescendant(t){const o=Array.from(t.children).find(r=>x.p.hasClass(r,"p-treenode")).children[1];return o&&o.children.length>0?this.findLastVisibleDescendant(o.children[o.children.length-1]):t}getParentNodeElement(t){const i=t.parentElement.parentElement.parentElement;return"P-TREENODE"===i.tagName?i:null}focusNode(t){this.tree.droppableNodes?t.children[1].children[0].focus():t.children[0].children[0].focus()}}return n.ICON_CLASS="p-treenode-icon ",n.\u0275fac=function(t){return new(t||n)(e.Y36((0,e.Gpc)(()=>v)))},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-treeNode"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode",node:"node",parentNode:"parentNode",root:"root",index:"index",firstChild:"firstChild",lastChild:"lastChild",level:"level",indentation:"indentation"},decls:1,vars:1,consts:[[3,"ngIf"],["class","p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"class",4,"ngIf"],[1,"p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave"],[3,"ngClass"],["role","treeitem",1,"p-treenode-content",3,"draggable","ngClass","click","contextmenu","touchend","drop","dragover","dragenter","dragleave","dragstart","dragend","keydown"],["type","button","pRipple","","tabindex","-1",1,"p-tree-toggler","p-link",3,"click"],[1,"p-tree-toggler-icon","pi","pi-fw",3,"ngClass"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[1,"p-treenode-label"],[4,"ngIf"],["class","p-treenode-children","style","display: none;","role","group",3,"display",4,"ngIf"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon","pi",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","group",1,"p-treenode-children",2,"display","none"],[3,"node","parentNode","firstChild","lastChild","index","height","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","parentNode","firstChild","lastChild","index","level"],["class","p-treenode-connector",4,"ngIf"],[1,"p-treenode",3,"ngClass"],["tabindex","0",1,"p-treenode-content",3,"ngClass","click","contextmenu","touchend","keydown"],["class","p-tree-toggler pi pi-fw",3,"ngClass","click",4,"ngIf"],["class","p-treenode-children-container",3,"display",4,"ngIf"],[1,"p-treenode-connector"],[1,"p-treenode-connector-table"],[1,"p-tree-toggler","pi","pi-fw",3,"ngClass","click"],[1,"p-treenode-children-container"],[1,"p-treenode-children"],[3,"node","firstChild","lastChild",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild"]],template:function(t,i){1&t&&e.YNc(0,X,4,4,"ng-template",0),2&t&&e.Q6J("ngIf",i.node)},directives:[p.O5,p.mk,y.H,p.tP,p.sg,n],encapsulation:2}),n})(),v=(()=>{class n{constructor(t,i,o){this.el=t,this.dragDropService=i,this.config=o,this.selectionChange=new e.vpe,this.onNodeSelect=new e.vpe,this.onNodeUnselect=new e.vpe,this.onNodeExpand=new e.vpe,this.onNodeCollapse=new e.vpe,this.onNodeContextMenuSelect=new e.vpe,this.onNodeDrop=new e.vpe,this.layout="vertical",this.metaKeySelection=!0,this.propagateSelectionUp=!0,this.propagateSelectionDown=!0,this.loadingIcon="pi pi-spinner",this.emptyMessage="",this.filterBy="label",this.filterMode="lenient",this.indentation=1.5,this.trackBy=(r,a)=>a,this.onFilter=new e.vpe}ngOnInit(){this.droppableNodes&&(this.dragStartSubscription=this.dragDropService.dragStart$.subscribe(t=>{this.dragNodeTree=t.tree,this.dragNode=t.node,this.dragNodeSubNodes=t.subNodes,this.dragNodeIndex=t.index,this.dragNodeScope=t.scope}),this.dragStopSubscription=this.dragDropService.dragStop$.subscribe(t=>{this.dragNodeTree=null,this.dragNode=null,this.dragNodeSubNodes=null,this.dragNodeIndex=null,this.dragNodeScope=null,this.dragHover=!1}))}ngOnChanges(t){t.value&&this.updateSerializedValue(),t.scrollHeight&&this.virtualScrollBody&&this.virtualScrollBody.ngOnInit()}get horizontal(){return"horizontal"==this.layout}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(h.ws.EMPTY_MESSAGE)}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"empty":this.emptyMessageTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;default:this.templateMap[t.name]=t.template}})}updateSerializedValue(){this.serializedValue=[],this.serializeNodes(null,this.getRootNode(),0,!0)}serializeNodes(t,i,o,r){if(i&&i.length)for(let a of i){a.parent=t;const d={node:a,parent:t,level:o,visible:r&&(!t||t.expanded)};this.serializedValue.push(d),d.visible&&a.expanded&&this.serializeNodes(a,a.children,o+1,d.visible)}}onNodeClick(t,i){let o=t.target;if(!x.p.hasClass(o,"p-tree-toggler")&&!x.p.hasClass(o,"p-tree-toggler-icon")){if(this.selectionMode){if(!1===i.selectable||this.hasFilteredNodes()&&!(i=this.getNodeWithKey(i.key,this.value)))return;let r=this.findIndexInSelection(i),a=r>=0;if(this.isCheckboxSelectionMode())a?(this.propagateSelectionDown?this.propagateDown(i,!1):this.selection=this.selection.filter((d,s)=>s!=r),this.propagateSelectionUp&&i.parent&&this.propagateUp(i.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:t,node:i})):(this.propagateSelectionDown?this.propagateDown(i,!0):this.selection=[...this.selection||[],i],this.propagateSelectionUp&&i.parent&&this.propagateUp(i.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:t,node:i}));else if(!this.nodeTouched&&this.metaKeySelection){let s=t.metaKey||t.ctrlKey;a&&s?(this.isSingleSelectionMode()?this.selectionChange.emit(null):(this.selection=this.selection.filter((_,De)=>De!=r),this.selectionChange.emit(this.selection)),this.onNodeUnselect.emit({originalEvent:t,node:i})):(this.isSingleSelectionMode()?this.selectionChange.emit(i):this.isMultipleSelectionMode()&&(this.selection=s&&this.selection||[],this.selection=[...this.selection,i],this.selectionChange.emit(this.selection)),this.onNodeSelect.emit({originalEvent:t,node:i}))}else this.isSingleSelectionMode()?a?(this.selection=null,this.onNodeUnselect.emit({originalEvent:t,node:i})):(this.selection=i,this.onNodeSelect.emit({originalEvent:t,node:i})):a?(this.selection=this.selection.filter((s,_)=>_!=r),this.onNodeUnselect.emit({originalEvent:t,node:i})):(this.selection=[...this.selection||[],i],this.onNodeSelect.emit({originalEvent:t,node:i})),this.selectionChange.emit(this.selection)}this.nodeTouched=!1}}onNodeTouchEnd(){this.nodeTouched=!0}onNodeRightClick(t,i){if(this.contextMenu){let o=t.target;if(o.className&&0===o.className.indexOf("p-tree-toggler"))return;this.findIndexInSelection(i)>=0||(this.isSingleSelectionMode()?this.selectionChange.emit(i):this.selectionChange.emit([i])),this.contextMenu.show(t),this.onNodeContextMenuSelect.emit({originalEvent:t,node:i})}}findIndexInSelection(t){let i=-1;if(this.selectionMode&&this.selection)if(this.isSingleSelectionMode())i=this.selection.key&&this.selection.key===t.key||this.selection==t?0:-1;else for(let o=0;o<this.selection.length;o++){let r=this.selection[o];if(r.key&&r.key===t.key||r==t){i=o;break}}return i}syncNodeOption(t,i,o,r){const a=this.hasFilteredNodes()?this.getNodeWithKey(t.key,i):null;a&&(a[o]=r||t[o])}hasFilteredNodes(){return this.filter&&this.filteredNodes&&this.filteredNodes.length}getNodeWithKey(t,i){for(let o of i){if(o.key===t)return o;if(o.children){let r=this.getNodeWithKey(t,o.children);if(r)return r}}}propagateUp(t,i){if(t.children&&t.children.length){let r=0,a=!1;for(let d of t.children)this.isSelected(d)?r++:d.partialSelected&&(a=!0);if(i&&r==t.children.length)this.selection=[...this.selection||[],t],t.partialSelected=!1;else{if(!i){let d=this.findIndexInSelection(t);d>=0&&(this.selection=this.selection.filter((s,_)=>_!=d))}t.partialSelected=!!(a||r>0&&r!=t.children.length)}this.syncNodeOption(t,this.filteredNodes,"partialSelected")}let o=t.parent;o&&this.propagateUp(o,i)}propagateDown(t,i){let o=this.findIndexInSelection(t);if(i&&-1==o?this.selection=[...this.selection||[],t]:!i&&o>-1&&(this.selection=this.selection.filter((r,a)=>a!=o)),t.partialSelected=!1,this.syncNodeOption(t,this.filteredNodes,"partialSelected"),t.children&&t.children.length)for(let r of t.children)this.propagateDown(r,i)}isSelected(t){return-1!=this.findIndexInSelection(t)}isSingleSelectionMode(){return this.selectionMode&&"single"==this.selectionMode}isMultipleSelectionMode(){return this.selectionMode&&"multiple"==this.selectionMode}isCheckboxSelectionMode(){return this.selectionMode&&"checkbox"==this.selectionMode}isNodeLeaf(t){return 0!=t.leaf&&!(t.children&&t.children.length)}getRootNode(){return this.filteredNodes?this.filteredNodes:this.value}getTemplateForNode(t){return this.templateMap?t.type?this.templateMap[t.type]:this.templateMap.default:null}onDragOver(t){this.droppableNodes&&(!this.value||0===this.value.length)&&(t.dataTransfer.dropEffect="move",t.preventDefault())}onDrop(t){if(this.droppableNodes&&(!this.value||0===this.value.length)){t.preventDefault();let i=this.dragNode;if(this.allowDrop(i,null,this.dragNodeScope)){let o=this.dragNodeIndex;this.value=this.value||[],this.validateDrop?this.onNodeDrop.emit({originalEvent:t,dragNode:i,dropNode:null,index:o,accept:()=>{this.processTreeDrop(i,o)}}):(this.onNodeDrop.emit({originalEvent:t,dragNode:i,dropNode:null,index:o}),this.processTreeDrop(i,o))}}}processTreeDrop(t,i){this.dragNodeSubNodes.splice(i,1),this.value.push(t),this.dragDropService.stopDrag({node:t})}onDragEnter(){this.droppableNodes&&this.allowDrop(this.dragNode,null,this.dragNodeScope)&&(this.dragHover=!0)}onDragLeave(t){if(this.droppableNodes){let i=t.currentTarget.getBoundingClientRect();(t.x>i.left+i.width||t.x<i.left||t.y>i.top+i.height||t.y<i.top)&&(this.dragHover=!1)}}allowDrop(t,i,o){if(t){if(this.isValidDragScope(o)){let r=!0;if(i)if(t===i)r=!1;else{let a=i.parent;for(;null!=a;){if(a===t){r=!1;break}a=a.parent}}return r}return!1}return!1}isValidDragScope(t){let i=this.droppableScope;if(i){if("string"==typeof i){if("string"==typeof t)return i===t;if(t instanceof Array)return-1!=t.indexOf(i)}else if(i instanceof Array){if("string"==typeof t)return-1!=i.indexOf(t);if(t instanceof Array)for(let o of i)for(let r of t)if(o===r)return!0}return!1}return!0}_filter(t){let i=t;if(""===i)this.filteredNodes=null;else{this.filteredNodes=[];const o=this.filterBy.split(","),r=u.gb.removeAccents(i).toLocaleLowerCase(this.filterLocale),a="strict"===this.filterMode;for(let d of this.value){let s=Object.assign({},d),_={searchFields:o,filterText:r,isStrictMode:a};(a&&(this.findFilteredNodes(s,_)||this.isFilterMatched(s,_))||!a&&(this.isFilterMatched(s,_)||this.findFilteredNodes(s,_)))&&this.filteredNodes.push(s)}}this.updateSerializedValue(),this.onFilter.emit({filter:i,filteredValue:this.filteredNodes})}resetFilter(){this.filteredNodes=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}findFilteredNodes(t,i){if(t){let o=!1;if(t.children){let r=[...t.children];t.children=[];for(let a of r){let d=Object.assign({},a);this.isFilterMatched(d,i)&&(o=!0,t.children.push(d))}}if(o)return t.expanded=!0,!0}}isFilterMatched(t,{searchFields:i,filterText:o,isStrictMode:r}){let a=!1;for(let d of i)u.gb.removeAccents(String(u.gb.resolveFieldData(t,d))).toLocaleLowerCase(this.filterLocale).indexOf(o)>-1&&(a=!0);return(!a||r&&!this.isNodeLeaf(t))&&(a=this.findFilteredNodes(t,{searchFields:i,filterText:o,isStrictMode:r})||a),a}getBlockableElement(){return this.el.nativeElement.children[0]}ngOnDestroy(){this.dragStartSubscription&&this.dragStartSubscription.unsubscribe(),this.dragStopSubscription&&this.dragStopSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(h.Y,8),e.Y36(h.b4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-tree"]],contentQueries:function(t,i,o){if(1&t&&e.Suo(o,h.jx,4),2&t){let r;e.iGM(r=e.CRH())&&(i.templates=r)}},viewQuery:function(t,i){if(1&t&&(e.Gf(g.N7,5),e.Gf(ee,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.virtualScrollBody=o.first),e.iGM(o=e.CRH())&&(i.filterViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",selectionMode:"selectionMode",selection:"selection",style:"style",styleClass:"styleClass",contextMenu:"contextMenu",layout:"layout",draggableScope:"draggableScope",droppableScope:"droppableScope",draggableNodes:"draggableNodes",droppableNodes:"droppableNodes",metaKeySelection:"metaKeySelection",propagateSelectionUp:"propagateSelectionUp",propagateSelectionDown:"propagateSelectionDown",loading:"loading",loadingIcon:"loadingIcon",emptyMessage:"emptyMessage",ariaLabel:"ariaLabel",togglerAriaLabel:"togglerAriaLabel",ariaLabelledBy:"ariaLabelledBy",validateDrop:"validateDrop",filter:"filter",filterBy:"filterBy",filterMode:"filterMode",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualNodeHeight:"virtualNodeHeight",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx",indentation:"indentation",trackBy:"trackBy"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onNodeContextMenuSelect:"onNodeContextMenuSelect",onNodeDrop:"onNodeDrop",onFilter:"onFilter"},features:[e.TTD],decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"ngClass","ngStyle","drop","dragover","dragenter","dragleave"],["class","p-tree-loading-overlay p-component-overlay",4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tree-filter-container",4,"ngIf"],[4,"ngIf","ngIfElse"],["virtualScrollList",""],["class","p-tree-empty-message",4,"ngIf"],[1,"p-tree-loading-overlay","p-component-overlay"],[1,"p-tree-filter-container"],["type","text","autocomplete","off",1,"p-tree-filter","p-inputtext","p-component",3,"keydown.enter","input"],["filter",""],[1,"p-tree-filter-icon","pi","pi-search"],[1,"p-tree-wrapper"],["class","p-tree-container","role","tree",4,"ngIf"],["role","tree",1,"p-tree-container"],[3,"node","firstChild","lastChild","index","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild","index","level"],[1,"p-tree-wrapper",3,"itemSize","minBufferPx","maxBufferPx"],[3,"level","rowNode","node","firstChild","lastChild","index","height","indentation",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],[3,"level","rowNode","node","firstChild","lastChild","index","indentation"],[1,"p-tree-empty-message"],["emptyFilter",""],[3,"ngClass","ngStyle"],["class","p-tree-loading-mask p-component-overlay",4,"ngIf"],[4,"ngIf"],[1,"p-tree-loading-mask","p-component-overlay"],[3,"node","root"]],template:function(t,i){1&t&&(e.YNc(0,fe,9,16,"div",0),e.YNc(1,ye,6,11,"div",1)),2&t&&(e.Q6J("ngIf",!i.horizontal),e.xp6(1),e.Q6J("ngIf",i.horizontal))},directives:[p.O5,p.mk,p.PC,p.tP,p.sg,Ie,g.N7,g.xd,g.x0],styles:[".p-tree-container{margin:0;padding:0;list-style-type:none;overflow:auto}.p-treenode-children{margin:0;padding:0;list-style-type:none}.p-tree-wrapper{overflow:auto}.p-treenode-selectable{cursor:pointer;-webkit-user-select:none;user-select:none}.p-tree-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-treenode-leaf>.p-treenode-content .p-tree-toggler{visibility:hidden}.p-treenode-content{display:flex;align-items:center}.p-tree-filter{width:100%}.p-tree-filter-container{position:relative;display:block;width:100%}.p-tree-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-tree-loading{position:relative;min-height:4rem}.p-tree .p-tree-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-tree-flex-scrollable{display:flex;flex:1;height:100%;flex-direction:column}.p-tree-flex-scrollable .p-tree-wrapper{flex:1}.p-tree .p-treenode-droppoint{height:4px;list-style-type:none}.p-tree .p-treenode-droppoint-active{border:0 none}.p-tree-horizontal{width:auto;padding-left:0;padding-right:0;overflow:auto}.p-tree.p-tree-horizontal table,.p-tree.p-tree-horizontal tr,.p-tree.p-tree-horizontal td{border-collapse:collapse;margin:0;padding:0;vertical-align:middle}.p-tree-horizontal .p-treenode-content{font-weight:normal;padding:.4em 1em .4em .2em;display:flex;align-items:center}.p-tree-horizontal .p-treenode-parent .p-treenode-content{font-weight:normal;white-space:nowrap}.p-tree.p-tree-horizontal .p-treenode{background:url(line.6fd2e298955ab301.gif) repeat-x scroll center center transparent;padding:.25rem 2.5rem}.p-tree.p-tree-horizontal .p-treenode.p-treenode-leaf,.p-tree.p-tree-horizontal .p-treenode.p-treenode-collapsed{padding-right:0}.p-tree.p-tree-horizontal .p-treenode-children{padding:0;margin:0}.p-tree.p-tree-horizontal .p-treenode-connector{width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-table{height:100%;width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-line{background:url(line.6fd2e298955ab301.gif) repeat-y scroll 0 0 transparent;width:1px}.p-tree.p-tree-horizontal table{height:0}\n"],encapsulation:2}),n})(),Se=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,g.Cl,C.T],h.m8,g.Cl]}),n})()}}]);